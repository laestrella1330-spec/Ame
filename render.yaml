services:
  - type: web
    name: ame
    runtime: node
    plan: free
    rootDir: ./
    buildCommand: npm install --include=dev && npm run build
    startCommand: cd server && NODE_ENV=production node dist/index.js
    envVars:
      - key: PORT
        value: 10000
      - key: DB_PATH
        value: ./data/videochat.db
      - key: JWT_SECRET
        generateValue: true
      - key: ADMIN_USERNAME
        value: admin
      - key: ADMIN_PASSWORD
        sync: false
      # TURN relay â€” optional but recommended for IP privacy.
      # Get free credentials at https://dashboard.metered.ca/signup (20 GB/month free).
      # Leave blank to fall back to STUN-only mode.
      - key: TURN_URL
        sync: false
      - key: TURN_USERNAME
        sync: false
      - key: TURN_CREDENTIAL
        sync: false
